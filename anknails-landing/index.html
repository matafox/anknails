<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ANK Studio - Nail Course</title>

    <link rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>üíÖ</text></svg>" />

    <script>
      try {
        const lang = localStorage.getItem("lang");
        if (!lang) {
          const l = navigator.language.split("-")[0];
          localStorage.setItem("lang", ["ru","uk","pl","en"].includes(l) ? l : "ru");
        }
      } catch {}
    </script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }

      gtag('consent', 'default', {
        ad_storage: 'denied',
        ad_user_data: 'denied',
        ad_personalization: 'denied',
        analytics_storage: 'denied',
        functionality_storage: 'granted',
        security_storage: 'granted',
        wait_for_update: 500
      });
    </script>

    <!-- GA4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QNZ703T3ZD"></script>
    <script>
      gtag('js', new Date());

      // –æ–ø—Ü—ñ–π–Ω–æ: —Ä–µ–¥–∞–∫—Ü—ñ—è —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –¥–∞–Ω–∏—Ö
      gtag('set', 'ads_data_redaction', true);

      gtag('config', 'G-QNZ703T3ZD', {
        send_page_view: false,
        anonymize_ip: true
      });

      (function () {
        let lastPath = null;

        const canSend = () => {
          try { return localStorage.getItem('ga_consent') === 'granted'; }
          catch { return false; }
        };

        const sendPV = () => {
          if (!canSend()) return;
          const path = location.pathname + location.search;
          if (path === lastPath) return;
          lastPath = path;

          gtag('event', 'page_view', {
            page_location: location.href,
            page_path: path,
            page_title: document.title
          });
        };


        window.__sendPV = sendPV;

        if (document.readyState === 'complete' || document.readyState === 'interactive') {
          sendPV();
        } else {
          addEventListener('DOMContentLoaded', sendPV);
        }

        const _ps = history.pushState, _rs = history.replaceState;
        history.pushState = function () { _ps.apply(this, arguments); setTimeout(sendPV, 0); };
        history.replaceState = function () { _rs.apply(this, arguments); setTimeout(sendPV, 0); };
        addEventListener('popstate', sendPV);
      })();

      (function () {
        try {
          const saved = localStorage.getItem('ga_consent'); // 'granted' | 'denied' | null
          if (saved === 'granted') {
            gtag('consent', 'update', {
              ad_storage: 'granted',
              analytics_storage: 'granted',
              ad_user_data: 'granted',
              ad_personalization: 'granted'
            });
          } else if (saved === 'denied') {
            gtag('consent', 'update', {
              ad_storage: 'denied',
              analytics_storage: 'denied',
              ad_user_data: 'denied',
              ad_personalization: 'denied'
            });
          }
        } catch {}
      })();
    </script>

    <style>

      .consent-bar {
        position: fixed; inset: auto 0 0 0; z-index: 9999;
        display: none;
        background: rgba(22,22,22,0.92);
        color: #fff; padding: 14px 12px;
        backdrop-filter: blur(8px);
      }
      .consent-wrap {
        max-width: 1100px; margin: 0 auto;
        display: flex; gap: 12px; align-items: center; justify-content: space-between;
        flex-wrap: wrap;
      }
      .consent-actions { display: flex; gap: 8px; }
      .btn {
        padding: 10px 14px; border-radius: 10px; font-weight: 700; border: 1px solid transparent;
        background: #fff; color: #111; cursor: pointer;
      }
      .btn-outline { background: transparent; color: #fff; border-color: rgba(255,255,255,0.35); }
      .btn:hover { transform: translateY(-1px); }
      .consent-text { max-width: 700px; font-size: 14px; opacity: 0.95; line-height: 1.35; }
      @media (max-width: 640px) {
        .consent-actions { width: 100%; justify-content: flex-end; }
      }
    </style>
  </head>

  <body class="bg-white dark:bg-neutral-900 transition-colors">
    <!-- –ë–∞–Ω–µ—Ä –∑–≥–æ–¥–∏ -->
    <div id="consent-bar" class="consent-bar" role="dialog" aria-live="polite" aria-label="Cookie consent">
      <div class="consent-wrap">
        <div class="consent-text">
      
        </div>
        <div class="consent-actions">
          <button id="consent-decline" class="btn btn-outline">–í—ñ–¥—Ö–∏–ª–∏—Ç–∏</button>
          <button id="consent-accept" class="btn">–ü—Ä–∏–π–Ω—è—Ç–∏</button>
        </div>
      </div>
    </div>

    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <script>

      (function () {
        const bar = document.getElementById('consent-bar');
        try {
          const saved = localStorage.getItem('ga_consent');
          if (!saved) bar.style.display = 'block';
        } catch { bar.style.display = 'block'; }

        const accept = document.getElementById('consent-accept');
        const decline = document.getElementById('consent-decline');

        accept?.addEventListener('click', () => {
          try { localStorage.setItem('ga_consent', 'granted'); } catch {}
          gtag('consent', 'update', {
            ad_storage: 'granted',
            analytics_storage: 'granted',
            ad_user_data: 'granted',
            ad_personalization: 'granted'
          });
          bar.style.display = 'none';
   
          try { window.__sendPV && window.__sendPV(); } catch {}
        });

        decline?.addEventListener('click', () => {
          try { localStorage.setItem('ga_consent', 'denied'); } catch {}
          gtag('consent', 'update', {
            ad_storage: 'denied',
            analytics_storage: 'denied',
            ad_user_data: 'denied',
            ad_personalization: 'denied'
          });
          bar.style.display = 'none';
        });
      })();
    </script>
  </body>
</html>
